<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Memoria ODS</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .card {
            width: 100px;
            height: 100px;
            perspective: 1000px;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 0.25rem;
        }

        .card-front {
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .card-back {
            background: #48bb78;
            transform: rotateY(180deg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold text-center mb-8">Juego de Memoria ODS</h1>
        <div id="game-board" class="grid grid-cols-4 gap-4 mb-8"></div>
        <div class="text-center">
            <p>Tiempo: <span id="timer">0</span> segundos</p>
            <p>Puntuación: <span id="score">0</span></p>
            <button id="restart" class="mt-4 px-4 py-2 bg-blue-500 text-white rounded">Reiniciar Juego</button>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        const ODS = [
            { id: 1, name: "Fin de la Pobreza", color: "#e5243b" },
            { id: 2, name: "Hambre Cero", color: "#dda63a" },
            { id: 3, name: "Salud y Bienestar", color: "#4c9f38" },
            { id: 4, name: "Educación de Calidad", color: "#c5192d" },
            { id: 5, name: "Igualdad de Género", color: "#ff3a21" },
            { id: 6, name: "Agua Limpia y Saneamiento", color: "#26bde2" },
            { id: 7, name: "Energía Asequible y No Contaminante", color: "#fcc30b" },
            { id: 8, name: "Trabajo Decente y Crecimiento Económico", color: "#a21942" }
        ];

        let firstCard = null;
        let secondCard = null;
        let lockBoard = false;
        let matches = 0;
        let timer;
        let seconds = 0;
        let score = 0;

        $(document).ready(function() {
            startGame();
            $('#restart').click(restartGame);
        });

        function startGame() {
            const cards = [...ODS, ...ODS];
            cards.sort(() => 0.5 - Math.random());
            $('#game-board').empty();

            cards.forEach(card => {
                const cardElement = $(`
                    <div class="card">
                        <div class="card-inner" data-id="${card.id}">
                            <div class="card-front"></div>
                            <div class="card-back" style="background-color: ${card.color}">${card.name}</div>
                        </div>
                    </div>
                `);
                $('#game-board').append(cardElement);
                cardElement.click(handleCardClick);
            });

            matches = 0;
            seconds = 0;
            score = 0;
            $('#timer').text(seconds);
            $('#score').text(score);
            clearInterval(timer);
            timer = setInterval(updateTimer, 1000);
        }

        function restartGame() {
            clearInterval(timer);
            startGame();
        }

        function updateTimer() {
            seconds++;
            $('#timer').text(seconds);
        }

        function handleCardClick() {
            if (lockBoard) return;
            if ($(this).hasClass('flipped')) return;

            $(this).addClass('flipped');

            if (!firstCard) {
                firstCard = $(this);
                return;
            }

            secondCard = $(this);
            lockBoard = true;

            const firstCardId = firstCard.find('.card-inner').data('id');
            const secondCardId = secondCard.find('.card-inner').data('id');

            if (firstCardId === secondCardId) {
                matches++;
                score += 10; // Aumenta la puntuación en 10 por cada par encontrado
                $('#score').text(score);
                resetBoard();
                if (matches === ODS.length) {
                    clearInterval(timer);
                    alert(`¡Felicidades! Has encontrado todos los pares en ${seconds} segundos con una puntuación de ${score}.`);
                }
            } else {
                score -= 2; // Resta 2 puntos por cada par incorrecto
                $('#score').text(score);
                setTimeout(() => {
                    firstCard.removeClass('flipped');
                    secondCard.removeClass('flipped');
                    resetBoard();
                }, 1000);
            }
        }

        function resetBoard() {
            [firstCard, secondCard, lockBoard] = [null, null, false];
        }
    </script>
</body>
</html>
